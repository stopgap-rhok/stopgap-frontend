{"version":3,"sources":["css/App.module.scss","components/Form/index.js","utility/http.js","api.js","App.js","serviceWorker.js","index.js","components/Form/css/Form.module.scss"],"names":["module","exports","t","Schema","Types","environmentSchema","singleStep","BooleanType","isRequired","nonResidential","businessSchema","name","StringType","address","userIsOwner","imageSchema","attachments","ArrayType","additionInfoSchema","sidewalkFlat","stepIsWide","correctHeight","contactSchema","canContact","email","isEmail","stepNames","Model","environment","ObjectType","shape","business","contact","info","image","extraInfo","steps","reduce","acc","i","firstStep","lastStep","length","Form","onSubmit","useState","step","setStep","state","setState","updater","value","next","currentStep","console","assert","nextStep","back","previousStep","ENVIRONMENT_INFO","EnvironmentInfoForm","onChange","goBack","BUSINESS_INFO","BusinessInfoForm","IMAGE","ImageForm","ADDITIONAL_INFO","AdditionalInfoForm","additional","CONTACT_INFO","ContactForm","isOwner","YesOrNo","children","className","props","FormGroup","styles","question","FormControl","cx","radioGroup","accepter","RadioGroup","Radio","radio","StepForm","schema","heading","subheading","ControlLabel","label","additionInfo","imageForm","imagequestion","Uploader","accept","listType","multiple","autoUpload","removable","form","useRef","schemuh","useMemo","ref","fluid","model","formValue","e","preventDefault","current","check","SubForm","forwardRef","formProps","container","buttonContainer","Button","appearance","size","type","onClick","navbutton","submit","actuallySubmit","Error","fetch","url","options","body","a","window","response","ok","json","getDB","then","db","transaction","objectStore","put","post","rawBody","method","mode","openDB","upgrade","upgradeDB","createObjectStore","autoIncrement","keyPath","endpoints","NEW_REPORT","submitReport","data","log","fd","FormData","businessName","businessAddress","set","details","businessDetails","userEmail","forEach","file","append","blobFile","push","App","main","isLocalhost","Boolean","location","hostname","match","registerValidSW","swUrl","config","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","onUpdate","onSuccess","catch","error","ReactDOM","render","document","getElementById","process","publicUrl","URL","href","origin","addEventListener","contentType","headers","get","status","indexOf","ready","unregister","reload","checkValidServiceWorker","reg","sync"],"mappings":"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","file":"static/js/main.5718f43d.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"main\":\"App_main__2l94Q\"};","import React, { useState, useMemo, useRef, forwardRef } from \"react\";\nimport cx from \"classnames\";\nimport {\n  Schema,\n  Form as RForm,\n  FormGroup,\n  FormControl,\n  Icon,\n  ControlLabel,\n  Checkbox,\n  CheckboxGroup,\n  Radio,\n  RadioGroup,\n  Button,\n  Uploader,\n} from \"rsuite\";\n\nimport styles from \"./css/Form.module.scss\";\n\nconst t = Schema.Types;\n\nconst environmentSchema = {\n  singleStep: t.BooleanType().isRequired(\"This field is required\"),\n  nonResidential: t.BooleanType().isRequired(\"This field is required\"),\n};\n\nconst businessSchema = {\n  name: t.StringType().isRequired(\"Business name is required\"),\n  address: t.StringType().isRequired(\"Business address is required\"),\n  userIsOwner: t.BooleanType().isRequired(\"This field is required\"),\n};\n\nconst imageSchema = {\n  attachments: t.ArrayType(),\n};\n\nconst additionInfoSchema = {\n  sidewalkFlat: t.BooleanType(),\n  stepIsWide: t.BooleanType(),\n  correctHeight: t.BooleanType(),\n};\n\nconst contactSchema = {\n  canContact: t.BooleanType().isRequired(\"This field is required\"),\n  email: t.StringType().isEmail(\"Invalid email address\"),\n};\n\nconst schema = Schema.Model({\n  environment: t\n    .ObjectType()\n    .shape(environmentSchema)\n    .isRequired(),\n  business: t\n    .ObjectType()\n    .shape(businessSchema)\n    .isRequired(),\n  contact: t\n    .ObjectType()\n    .shape(contactSchema)\n    .isRequired(),\n  info: t\n    .ObjectType()\n    .shape(additionInfoSchema)\n    .isRequired(),\n  image: t\n    .ObjectType()\n    .shape(imageSchema)\n    .isRequired(),\n  extraInfo: t.StringType(),\n});\n\nconst stepNames = [\n  \"ENVIRONMENT_INFO\",\n  \"BUSINESS_INFO\",\n  \"IMAGE\",\n  \"ADDITIONAL_INFO\",\n  \"CONTACT_INFO\",\n];\n\nconst steps = stepNames.reduce((acc, name, i) => ({ ...acc, [name]: i }), {});\n\nconst firstStep = steps[stepNames[0]];\nconst lastStep = steps[stepNames[stepNames.length - 1]];\n\nfunction nextStep(currentStep) {\n  console.assert(currentStep < lastStep);\n  return currentStep + 1;\n}\n\nfunction previousStep(currentStep) {\n  console.assert(currentStep > firstStep);\n  return currentStep - 1;\n}\n\nexport default function Form({ onSubmit }) {\n  const [step, setStep] = useState(firstStep);\n  const [state, setState] = useState({});\n\n  function updater(name) {\n    return function update(value) {\n      setState({ ...state, [name]: value });\n    };\n  }\n\n  function next(currentStep) {\n    if (currentStep === lastStep) {\n      onSubmit(state);\n    } else {\n      setStep(nextStep(currentStep));\n    }\n  }\n\n  function back(currentStep) {\n    setStep(previousStep(currentStep));\n  }\n\n  return (\n    <>\n      {step === steps.ENVIRONMENT_INFO && (\n        <EnvironmentInfoForm\n          value={state.environment}\n          onChange={updater(\"environment\")}\n          onSubmit={next}\n          goBack={back}\n        />\n      )}\n      {step === steps.BUSINESS_INFO && (\n        <BusinessInfoForm\n          value={state.business}\n          onChange={updater(\"business\")}\n          onSubmit={next}\n          goBack={back}\n        />\n      )}\n      {step === steps.IMAGE && (\n        <ImageForm\n          value={state.image}\n          onChange={updater(\"image\")}\n          onSubmit={next}\n          goBack={back}\n        />\n      )}\n      {step === steps.ADDITIONAL_INFO && (\n        <AdditionalInfoForm\n          value={state.additional}\n          onChange={updater(\"additional\")}\n          onSubmit={next}\n          goBack={back}\n        />\n      )}\n      {step === steps.CONTACT_INFO && (\n        <ContactForm\n          isOwner={state.business.userIsOwner}\n          value={state.contact}\n          onChange={updater(\"contact\")}\n          onSubmit={next}\n          goBack={back}\n        />\n      )}\n    </>\n  );\n}\n\nfunction YesOrNo({ children, className, ...props }) {\n  return (\n    <FormGroup>\n      <p className={styles.question}>{children}</p>\n      <FormControl\n        className={cx(className, styles.radioGroup)}\n        accepter={RadioGroup}\n        {...props}\n      >\n        <Radio className={styles.radio} value={true}>\n          Yes.\n        </Radio>\n        <Radio className={styles.radio} value={false}>\n          No.\n        </Radio>\n      </FormControl>\n    </FormGroup>\n  );\n}\n\nfunction EnvironmentInfoForm({ goBack, value, onChange, onSubmit }) {\n  return (\n    <StepForm\n      schema={environmentSchema}\n      value={value}\n      onChange={onChange}\n      onSubmit={onSubmit}\n      step={steps.ENVIRONMENT_INFO}\n      goBack={goBack}\n      heading=\"Tell us about an Ottawa business that could use a StopGap ramp.\"\n    >\n      <YesOrNo name=\"singleStep\">\n        Is the location inaccessible due to a single step?\n      </YesOrNo>\n      <YesOrNo name=\"nonResidential\">Is the location non-residential?</YesOrNo>\n    </StepForm>\n  );\n}\n\nfunction BusinessInfoForm({ goBack, value, onChange, onSubmit }) {\n  return (\n    <StepForm\n      schema={businessSchema}\n      value={value}\n      onChange={onChange}\n      onSubmit={onSubmit}\n      step={steps.BUSINESS_INFO}\n      goBack={goBack}\n      heading=\"Where would you like a ramp?\"\n      subheading=\"* mandatory\"\n    >\n      <FormGroup>\n        <ControlLabel className={styles.label}>\n          Business name *\n          <FormControl name=\"name\" />\n        </ControlLabel>\n      </FormGroup>\n      <FormGroup>\n        <ControlLabel className={styles.label}>\n          Address *\n          <FormControl name=\"address\" />\n        </ControlLabel>\n      </FormGroup>\n      <YesOrNo name=\"userIsOwner\">Are you the owner of this business?</YesOrNo>\n    </StepForm>\n  );\n}\n\nfunction AdditionalInfoForm({ goBack, value, onChange, onSubmit }) {\n  return (\n    <div className={styles.additionInfo}>\n      <StepForm\n        schema={additionInfoSchema}\n        value={value}\n        onChange={onChange}\n        onSubmit={onSubmit}\n        step={steps.ADDITIONAL_INFO}\n        goBack={goBack}\n        heading=\"Give us some extra information.\"\n      >\n        <YesOrNo name=\"sidewalkFlat\">Is the sidewalk flat?</YesOrNo>\n        <YesOrNo name=\"stepIsWide\">Is the step 34 inches or wider?</YesOrNo>\n        <YesOrNo name=\"correctHeight\">\n          Is the step taller than 2 inches and shorter than 9 inches?\n        </YesOrNo>\n      </StepForm>\n    </div>\n  );\n}\n\nfunction ContactForm({ isOwner, goBack, value, onChange, onSubmit }) {\n  return (\n    <StepForm\n      schema={\n        isOwner\n          ? {\n              ...contactSchema,\n              email: t\n                .StringType()\n                .isEmail()\n                .isRequired(\"This field is required\"),\n            }\n          : contactSchema\n      }\n      value={value}\n      onChange={onChange}\n      onSubmit={onSubmit}\n      step={steps.CONTACT_INFO}\n      goBack={goBack}\n      heading={\n        isOwner\n          ? \"We'll drop you a line soon.\"\n          : \"Can we contact you about this request?\"\n      }\n    >\n      {isOwner || (\n        <YesOrNo name=\"canContact\">\n          Can we contact you about this request?\n        </YesOrNo>\n      )}\n      <FormGroup>\n        <ControlLabel>\n          Email address\n          <FormControl name=\"email\" isRequired={isOwner} />\n        </ControlLabel>\n      </FormGroup>\n    </StepForm>\n  );\n}\n\nfunction ImageForm({ goBack, value, onChange, onSubmit }) {\n  return (\n    <div className={styles.imageForm}>\n      <StepForm\n        heading=\"Add a photo or two.\"\n        schema={imageSchema}\n        step={steps.IMAGE}\n        onSubmit={onSubmit}\n        onChange={onChange}\n        value={value}\n        goBack={goBack}\n      >\n        <p className={styles.imagequestion}>\n          Be sure to show the step and entryway.\n        </p>\n        <FormControl\n          accepter={Uploader}\n          accept=\"image/*\"\n          listType=\"picture\"\n          multiple\n          name=\"attachments\"\n          autoUpload={false}\n          removable\n        ></FormControl>\n      </StepForm>\n    </div>\n  );\n}\n\nfunction StepForm({\n  children,\n  goBack,\n  value,\n  onChange,\n  onSubmit,\n  step,\n  schema,\n  heading,\n  ...props\n}) {\n  const form = useRef(null);\n  const schemuh = useMemo(() => Schema.Model(schema), [schema]);\n\n  function submit(e) {\n    e.preventDefault();\n\n    if (form.current.check()) {\n      onSubmit(step);\n    }\n  }\n\n  return (\n    <SubForm\n      ref={form}\n      fluid\n      model={schemuh}\n      formValue={value}\n      onChange={onChange}\n      onSubmit={submit}\n      step={step}\n      goBack={goBack}\n      heading={heading}\n      {...props}\n    >\n      {children}\n    </SubForm>\n  );\n}\n\nconst SubForm = forwardRef(function SubForm(\n  { children, className, heading, subheading, step, goBack, ...formProps },\n  ref,\n) {\n  return (\n    <RForm ref={ref} className={cx(styles.container, className)} {...formProps}>\n      <h2 className={styles.heading}>\n        {heading}\n        {subheading && (\n          <small className={styles.subheading}>{subheading}</small>\n        )}\n      </h2>\n      {children}\n      <div className={styles.buttonContainer}>\n        {step !== firstStep && (\n          <Button\n            appearance=\"subtle\"\n            size=\"lg\"\n            type=\"button\"\n            onClick={() => goBack(step)}\n            className={styles.navbutton}\n          >\n            &lt; Back\n          </Button>\n        )}\n        <Button\n          appearance=\"primary\"\n          size=\"lg\"\n          type=\"submit\"\n          className={cx(styles.submit, {\n            [styles.actuallySubmit]: step === lastStep,\n          })}\n        >\n          {step === lastStep ? \"Submit.\" : \"Next >\"}\n        </Button>\n      </div>\n    </RForm>\n  );\n});\n","import { openDB } from \"idb\";\n\nexport class HTTPError extends Error {}\n\n/**\n * Make an http request\n *\n * This function wraps around `window.fetch`, checking if the response is ok and\n * throwing if not. By default `fetch` only throws if there is a network error,\n * but we care more for if the request was successful.\n *\n * @param {string} url - The url to make a request to\n * @param {object} options - A fetch options object\n * @returns Promise - A promise resolving to the body of the response\n */\nexport async function fetch(url, options, body) {\n  try {\n    const response = await window.fetch(url, options);\n\n    if (response.ok) {\n      return await response.json();\n    }\n  } catch (e) {\n    getDB().then(function(db) {\n      var transaction = db.transaction(\"outbox\", \"readwrite\");\n      return transaction.objectStore(\"outbox\").put({\n        body,\n        url:\n          \"https://us-east4-rhok11-stopgap.cloudfunctions.net/uploadRampRequest\",\n      });\n    });\n  }\n}\n\n/**\n * Make a GET request\n */\nexport function get(urlString, params = {}) {\n  const url = new URL(urlString);\n\n  for (const [key, value] of Object.entries(params)) {\n    url.searchParams.set(key, value);\n  }\n\n  return fetch(url);\n}\n\nexport function formdataAppendObject(fd, obj) {\n  for (const [key, value] of Object.entries(obj)) {\n    if (typeof value === \"object\") {\n      formdataAppendObject(fd, value);\n    } else {\n      fd.set(key, value);\n    }\n  }\n}\n\n/**\n * Make a POST request\n *\n * @param {string} url - The URL to send the form data to\n * @param {FormData} body - The data to include in the request\n * @returns {Promise}\n */\nexport function post(url, body, rawBody) {\n  return fetch(\n    url,\n    {\n      method: \"POST\",\n      mode: \"no-cors\",\n      body,\n    },\n    rawBody,\n  );\n}\n\nasync function getDB() {\n  return await openDB(\"reports\", 1, {\n    upgrade: function(upgradeDB) {\n      upgradeDB.createObjectStore(\"outbox\", {\n        autoIncrement: true,\n        keyPath: \"id\",\n      });\n    },\n  });\n}\n","import { post } from \"./utility/http\";\n\nexport const endpoints = {\n  NEW_REPORT:\n    \"https://us-east4-rhok11-stopgap.cloudfunctions.net/uploadRampRequest\",\n};\n\nexport async function submitReport(data) {\n  console.log(data);\n  const fd = new FormData();\n  const rawBody = {\n    businessName: data.business.name,\n    businessAddress: data.business.address,\n    attachments: [],\n    singleStep: data.environment.singleStep,\n    nonResidential: data.environment.nonResidential,\n    userIsOwner: data.business.userIsOwner,\n    canContact: data.contact.canContact,\n  };\n  fd.set(\"businessName\", data.business.name);\n  fd.set(\"businessAddress\", data.business.address);\n  fd.set(\"singleStep\", data.environment.singleStep);\n  fd.set(\"nonResidential\", data.environment.nonResidential);\n  fd.set(\"canContact\", data.contact.canContact);\n\n  if (data.business.details) {\n    fd.set(\"businessDetails\", data.business.details);\n    rawBody.businessDetails = data.business.details;\n  }\n  if (data.contact.email) {\n    fd.set(\"userEmail\", data.contact.email);\n    rawBody.userEmail = data.contact.email;\n  }\n  fd.set(\"userIsOwner\", data.business.userIsOwner);\n  if (data.image) {\n    if (data.image.attachments) {\n      data.image.attachments.forEach(file => {\n        fd.append(\"attachments\", file.blobFile, file.name);\n        rawBody.attachments.push(file);\n      });\n    }\n  }\n  if (data.additional) {\n    if (data.additional.sidewalkFlat) {\n      fd.set(\"sidewalkFlat\", data.additional.sidewalkFlat);\n      rawBody.sidewalkFlat = data.additional.sidewalkFlat;\n    }\n    if (data.additional.stepIsWide) {\n      fd.set(\"stepIsWide\", data.additional.stepIsWide);\n      rawBody.stepIsWide = data.additional.stepIsWide;\n    }\n    if (data.additional.correctHeight) {\n      fd.set(\"correctHeight\", data.additional.correctHeight);\n      rawBody.correctHeight = data.additional.correctHeight;\n    }\n  }\n\n  await post(endpoints.NEW_REPORT, fd, rawBody);\n}\n","import React from \"react\";\n\nimport Form from \"./components/Form\";\nimport { submitReport } from \"./api\";\n\nimport styles from \"./css/App.module.scss\";\n\nfunction App() {\n  return (\n    <main className={styles.main}>\n      <Form onSubmit={submitReport} />\n    </main>\n  );\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === \"localhost\" ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === \"[::1]\" ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,\n    ),\n);\n\nexport function register(config) {\n  console.log(process.env.NODE_ENV);\n  if (\n    true ||\n    (process.env.NODE_ENV === \"production\" && \"serviceWorker\" in navigator)\n  ) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    console.log(publicUrl.origin);\n    console.log(window.location.origin);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener(\"load\", () => {\n      const swUrl = `${process.env.PUBLIC_URL}/sw.js`;\n      console.log(swUrl);\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(reg => {\n          reg.sync.register(\"sendReports\");\n          console.log(\n            \"This web app is being served cache-first by a service \" +\n              \"worker. To learn more, visit https://bit.ly/CRA-PWA\",\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === \"installed\") {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                \"New content is available and will be used when all \" +\n                  \"tabs for this page are closed. See https://bit.ly/CRA-PWA.\",\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log(\"Content is cached for offline use.\");\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error(\"Error during service worker registration:\", error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get(\"content-type\");\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf(\"javascript\") === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        \"No internet connection found. App is running in offline mode.\",\n      );\n    });\n}\n\nexport function unregister() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport * as serviceWorker from \"./serviceWorker\";\n\nimport \"normalize.css\";\n\nReactDOM.render(<App />, document.getElementById(\"root\"));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.register();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Form_container__2pLXI\",\"buttonContainer\":\"Form_buttonContainer__24Fal\",\"navbutton\":\"Form_navbutton__2YhHT\",\"submit\":\"Form_submit__3yNoO Form_navbutton__2YhHT\",\"radioGroup\":\"Form_radioGroup__1G91H\",\"radio\":\"Form_radio__2rw5C\",\"label\":\"Form_label__3G2px\",\"heading\":\"Form_heading__34apI\",\"subheading\":\"Form_subheading__2Rd1n\",\"actuallySubmit\":\"Form_actuallySubmit__1-Z7A\",\"question\":\"Form_question__vQjhP\",\"additionInfo\":\"Form_additionInfo__1ylv7\",\"imageForm\":\"Form_imageForm__1j9UI\",\"imagequestion\":\"Form_imagequestion__1a_e3\"};"],"sourceRoot":""}